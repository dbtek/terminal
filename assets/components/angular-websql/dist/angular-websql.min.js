"use strict";angular.module("paulocaldeira17.angular.websql",[]).factory("Websql",[function(){return{insert:function(c,e){var f="INSERT INTO `{tableName}` ({fields}) VALUES({values}); ";var a="",b="";for(var d in e){a+=(Object.keys(e)[Object.keys(e).length-1]==d)?"`"+d+"`":"`"+d+"`, ";b+=(Object.keys(e)[Object.keys(e).length-1]==d)?"'"+e[d]+"'":"'"+e[d]+"', "}return this.replace(f,{"{tableName}":c,"{fields}":a,"{values}":b})},update:function(b,g,c){var f="UPDATE `{tableName}` SET {update} WHERE {where}; ";var e="";for(var d in g){e+="`"+d+"`='"+g[d]+"'"}var a=this.whereClause(c);return this.replace(f,{"{tableName}":b,"{update}":e,"{where}":a})},del:function(b,c){var d="DELETE FROM `{tableName}` WHERE {where}; ";var a=this.whereClause(c);return this.replace(d,{"{tableName}":b,"{where}":a})},select:function(b,c){var d="SELECT * FROM `{tableName}` WHERE {where}; ";var a=this.whereClause(c);return this.replace(d,{"{tableName}":b,"{where}":a})},selectAll:function(a){return"SELECT * FROM `"+a+"`; "},whereClause:function(b){var a="";for(var c in b){a+=(typeof b[c]==="object")?(typeof b[c]["union"]==="undefined")?(typeof b[c]["value"]==="string"&&b[c]["value"].match(/NULL/ig))?"`"+c+"` "+b[c]["value"]:"`"+c+"` "+b[c]["operator"]+" '"+b[c]["value"]+"'":(typeof b[c]["value"]==="string"&&b[c]["value"].match(/NULL/ig))?"`"+c+"` "+b[c]["value"]+" "+b[c]["union"]+" ":"`"+c+"` "+b[c]["operator"]+" '"+b[c]["value"]+"' "+b[c]["union"]+" ":(typeof b[c]==="string"&&b[c].match(/NULL/ig))?"`"+c+"` "+b[c]:"`"+c+"`='"+b[c]+"'"}return a},replace:function(a,c){for(var b in c){a=a.replace(new RegExp(b,"ig"),c[b])}return a},createTable:function(j,g){var b="CREATE TABLE IF NOT EXISTS `{tableName}` ({fields}); ";var c=[];var a="";for(var e in g){var l="{type} {null}";a+="`"+e+"` ";for(var k in g[e]){l=l.replace(new RegExp("{"+k+"}","ig"),g[e][k])}a+=l;if(typeof g[e]["default"]!=="undefined"){a+=" DEFAULT "+g[e]["default"]}if(typeof g[e]["primary"]!=="undefined"){a+=" PRIMARY KEY"}if(typeof g[e]["auto_increment"]!=="undefined"){a+=" AUTOINCREMENT"}if(Object.keys(g)[Object.keys(g).length-1]!=e){a+=","}if(typeof g[e]["primary"]!=="undefined"&&g[e]["primary"]){c.push(e)}}var d={tableName:j,fields:a};for(var f in d){b=b.replace(new RegExp("{"+f+"}","ig"),d[f])}return b},dropTable:function(a){return"DROP TABLE IF EXISTS `"+a+"`; "}}}]);